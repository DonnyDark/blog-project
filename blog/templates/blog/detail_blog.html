{% extends 'blog/_base2.html' %}
{% load static %}

{% load crispy_forms_tags %}

{% block title %}Detail Blog{% endblock %}

{% block main %}
{% include "blog/blog_logic.html" %}
<!-- comment section -->
<div class="container-fluid bg-light row align-items-start my-lg-4">
<div class="container-fluid">
<h4 class="h4">Leave your comment!</h4>
<div id="comment-section">
    {% if user.is_authenticated %}
    <form method="POST" class="">
        {% csrf_token %}
        <div class="form-group">
            {{ comment_form|crispy }}
            <button class="btn btn-info" type="submit">Add comment <i class="fas fa-comments"></i></button>
        </div>
    </form>
    {% else %}
    <a class="btn btn-outline-info" href="{% url 'login' %}?next={{ request.path }}">Log in to add a comment!</a><br>
    {% endif %}

    {% if comments %}
    <strong class="text-secondary">{{ blog.number_of_comments }} Comment{{ blog.number_of_comments|pluralize }}</strong>
    <hr>
    <ul>
        {% for comment in comments %}
        <li>
            <div>
                <span>
                    <strong class="text-info">{{ comment.author }} </strong>
                    <small class="text-muted">{{ comment.date_posted }}</small>
                </span>
                <p>
                    {{ comment.text|safe }}
                </p>
            </div>
        </li>
        {% endfor %}
    </ul>
    {% else %}
        <strong class="text-secondary">No comments yet...</strong>
    {% endif %}
</div>
</div>
</div>
{% endblock %}